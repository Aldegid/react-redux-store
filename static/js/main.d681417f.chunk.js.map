{"version":3,"sources":["components/bookstore-service-context/bookstore-service-context.js","components/hoc/with-bookstore-service.js","actions/index.js","components/shopping-cart-table/shopping-cart-table.js","components/shopping-cart-table/index.js","components/shop-header/index.js","components/shop-header/shop-header.js","components/book-list-item/index.js","components/book-list-item/book-list-item.js","utils/compose.js","components/loader/index.js","components/loader/loader.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/book-list/book-list.js","components/book-list/index.js","components/pages/home-page.js","components/pages/cart-page.js","components/app/app.js","components/app/index.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","services/bookstore-service.js","reducers/book-list-reducer.js","reducers/shopping-cart-reducer.js","reducers/index.js","store.js","index.js"],"names":["React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","react_default","a","createElement","bookstoreService","Object","assign","bookAddedToCart","bookId","type","payload","fetchBooks","dispatch","getBooks","then","data","catch","err","mapDispatchToProps","onIncrease","onDecrease","onDelete","ShoppingCartTable","connect","_ref2","_ref2$shoppingCart","shoppingCart","items","cartItems","total","orderTotal","_ref","className","map","item","idx","id","title","count","key","onClick","ShopHeader","totalCount","forEach","react_router_dom","to","BookListItem","book","onAddedToCart","author","price","coverImage","src","alt","compose","_len","arguments","length","funcs","Array","_key","comp","reduceRight","wrapped","f","Loader","ErrorIndicator","BookList","books","components_book_list_item","BookListContainer","this","_this$props","loading","error","components_loader","components_error_indicator","book_list_BookList","Component","_ref2$bookList","bookList","_ref3","HomePage","components_book_list","CartPage","App","role","components_shop_header","react_router","path","component","exact","components_shopping_cart_table","ErrorBoundry","state","hasError","setState","children","BookstoreService","_this","Promise","resolve","reject","setTimeout","Math","random","Error","updateBookList","action","undefined","updateCartItems","concat","toConsumableArray","slice","updateOrder","quantity","find","itemIndex","findIndex","newItem","_item$id","_item$count","_item$title","_item$total","updateCartItem","updateShoppingCart","console","log","_ref4","_ref5","reducer","store","createStore","ReactDOM","render","es","error_boundry","value","components_app","document","getElementById"],"mappings":"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","file":"static/js/main.d681417f.chunk.js","sourcesContent":["import React from 'react';\n\nconst {\n  Provider: BookstoreServiceProvider,\n  Consumer: BookstoreServiceConsumer\n} = React.createContext();\n\nexport { BookstoreServiceProvider, BookstoreServiceConsumer };\n","import React from 'react';\nimport { BookstoreServiceConsumer } from '../bookstore-service-context';\n\nconst withBookstoreService = () => Wrapped => {\n  return props => {\n    return (\n      <BookstoreServiceConsumer>\n        {bookstoreService => {\n          return <Wrapped {...props} bookstoreService={bookstoreService} />;\n        }}\n      </BookstoreServiceConsumer>\n    );\n  };\n};\n\nexport default withBookstoreService;\n","const booksRequested = () => {\n  return {\n    type: 'FETCH_BOOKS_REQUEST'\n  };\n};\n\nconst booksLoaded = newBooks => {\n  return {\n    type: 'FETCH_BOOKS_SUCCESS',\n    payload: newBooks\n  };\n};\n\nconst booksError = error => {\n  return {\n    type: 'FETCH_BOOKS_FAILURE',\n    payload: error\n  };\n};\n\nexport const bookAddedToCart = bookId => {\n  return {\n    type: 'BOOK_ADDED_TO_CART',\n    payload: bookId\n  };\n};\n\nexport const bookRemovedFromCart = bookId => {\n  return {\n    type: 'BOOK_REMOVED_FROM_CART',\n    payload: bookId\n  };\n};\n\nexport const allBooksRemovedFromCart = bookId => {\n  return {\n    type: 'ALL_BOOKS_REMOVED_FROM_CART',\n    payload: bookId\n  };\n};\n\nconst fetchBooks = (bookstoreService, dispatch) => () => {\n  dispatch(booksRequested());\n  bookstoreService\n    .getBooks()\n    .then(data => dispatch(booksLoaded(data)))\n    .catch(err => dispatch(booksError(err)));\n};\n\nexport { fetchBooks };\n","import React from 'react';\nimport { connect } from 'react-redux';\n\nimport {\n  bookAddedToCart,\n  bookRemovedFromCart,\n  allBooksRemovedFromCart\n} from '../../actions';\n\nimport './shopping-cart-table.css';\n\nconst ShoppingCartTable = ({\n  items,\n  total,\n  onIncrease,\n  onDecrease,\n  onDelete\n}) => {\n  const renderRow = (item, idx) => {\n    const { id, title, count, total } = item;\n    return (\n      <tr key={id}>\n        <td>{idx + 1}</td>\n        <td>{title}</td>\n        <td>\n          <button\n            onClick={() => onDecrease(id)}\n            className='btn btn-outline-warning btn-sm'\n          >\n            <i className='fa fa-minus-circle' />\n          </button>\n          {count}\n\n          <button\n            onClick={() => onIncrease(id)}\n            className='btn btn-outline-success btn-sm'\n          >\n            <i className='fa fa-plus-circle' />\n          </button>\n        </td>\n        <td>${total}</td>\n        <td>\n          <button\n            onClick={() => onDelete(id)}\n            className='btn btn-outline-danger btn-sm'\n          >\n            <i className='fa fa-trash-o' />\n          </button>\n        </td>\n      </tr>\n    );\n  };\n\n  return (\n    <div className='shopping-cart-table'>\n      <h2>Your Order</h2>\n      <table className='table'>\n        <thead>\n          <tr>\n            <th>#</th>\n            <th>Item</th>\n            <th>Count</th>\n            <th>Price</th>\n            <th>Action</th>\n          </tr>\n        </thead>\n\n        <tbody>{items.map(renderRow)}</tbody>\n      </table>\n\n      <div className='total'>Total: ${total}</div>\n    </div>\n  );\n};\n\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\n  return {\n    items: cartItems,\n    total: orderTotal\n  };\n};\n\nconst mapDispatchToProps = {\n  onIncrease: bookAddedToCart,\n  onDecrease: bookRemovedFromCart,\n  onDelete: allBooksRemovedFromCart\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ShoppingCartTable);\n","import ShoppingCartTable from './shopping-cart-table';\n\nexport default ShoppingCartTable;\n","import ShopHeader from './shop-header';\n\nexport default ShopHeader;","import React from 'react';\nimport { connect } from 'react-redux';\nimport './shop-header.css';\n\nimport { Link } from 'react-router-dom';\n\nconst ShopHeader = ({ items, total }) => {\n  return (\n    <header className='shop-header row align-items-center'>\n      <Link to='/'>\n        <div className='logo text-dark'>Book Store</div>\n      </Link>\n      <Link to='/cart'>\n        <div className='shopping-cart'>\n          <i className='cart-icon fa fa-shopping-cart' />\n          {items} items (${total})\n        </div>\n      </Link>\n    </header>\n  );\n};\n\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\n  let totalCount = 0;\n  cartItems.forEach(item => {\n    totalCount = totalCount + item.count;\n  });\n  return {\n    items: totalCount,\n    total: orderTotal\n  };\n};\n\nexport default connect(mapStateToProps)(ShopHeader);\n","import BookListItem from './book-list-item';\n\nexport default BookListItem;\n","import React from 'react';\n\nimport './book-list-item.css';\n\nconst bookListItem = ({ book, onAddedToCart }) => {\n  const { title, author, price, coverImage } = book;\n  return (\n    <div className='book-list-item'>\n      <div className='book-cover'>\n        <img src={coverImage} alt='cover' />\n      </div>\n      <div className='book-details'>\n        <span className='book-title'>{title}</span>\n        <div className='book-author'>{author}</div>\n        <div className='book-price'>${price}</div>\n        <button onClick={onAddedToCart} className='btn btn-info add-to-cart'>\n          Add to cart\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default bookListItem;\n","const compose = (...funcs) => (comp) => {\n  return funcs.reduceRight(\n    (wrapped, f) => f(wrapped), comp);\n};\n\nexport default compose;\n","import Loader from './loader';\n\nexport default Loader;\n","import React from 'react';\n\nimport './loader.css';\n\nconst Loader = () => {\n  return (\n    <div className='lds-roller'>\n      <div />\n      <div />\n      <div />\n      <div />\n      <div />\n      <div />\n      <div />\n      <div />\n    </div>\n  );\n};\n\nexport default Loader;\n","import ErrorIndicator from './error-indicator';\n\nexport default ErrorIndicator;\n","import React from 'react';\nimport './error-indicator.css';\n\nconst ErrorIndicator = () => {\n  return <div>Error!</div>;\n};\n\nexport default ErrorIndicator;\n","import React, { Component } from 'react';\nimport BookListItem from '../book-list-item';\n\nimport { connect } from 'react-redux';\n\nimport { withBookstoreService } from '../hoc';\nimport { fetchBooks, bookAddedToCart } from '../../actions';\nimport { compose } from '../../utils';\n\nimport Loader from '../loader';\nimport ErrorIndicator from '../error-indicator';\n\nimport './book-list.css';\n\nconst BookList = ({ books, onAddedToCart }) => {\n  return (\n    <ul className='book-list'>\n      {books.map(book => {\n        return (\n          <li key={book.id}>\n            <BookListItem\n              book={book}\n              onAddedToCart={() => onAddedToCart(book.id)}\n            />\n          </li>\n        );\n      })}\n    </ul>\n  );\n};\n\nclass BookListContainer extends Component {\n  componentDidMount() {\n    this.props.fetchBooks();\n  }\n\n  render() {\n    const { books, loading, error, onAddedToCart } = this.props;\n\n    if (loading) {\n      return <Loader />;\n    }\n\n    if (error) {\n      return <ErrorIndicator />;\n    }\n\n    return <BookList books={books} onAddedToCart={onAddedToCart} />;\n  }\n}\n\nconst mapStateToProps = ({ bookList: { books, loading, error } }) => {\n  return { books, loading, error };\n};\n\nconst mapDispatchToProps = (dispatch, { bookstoreService }) => {\n  return {\n    fetchBooks: fetchBooks(bookstoreService, dispatch),\n    onAddedToCart: id => dispatch(bookAddedToCart(id))\n  };\n};\n\nexport default compose(\n  withBookstoreService(),\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )\n)(BookListContainer);\n","import BookList from './book-list';\n\nexport default BookList;\n","import React from 'react';\n\nimport BookLIst from '../book-list';\n\nconst HomePage = () => {\n  return <BookLIst />;\n};\n\nexport default HomePage;\n","import React from 'react';\n\nconst CartPage = () => {\n  return <h2>Cart</h2>;\n};\n\nexport default CartPage;\n","import React, { Component } from 'react';\n\nimport { withBookstoreService } from '../hoc';\nimport { Route, Switch } from 'react-router-dom';\n\nimport ShoppingCartTable from '../shopping-cart-table';\n\nimport ShopHeader from '../shop-header';\nimport { HomePage, CartPage } from '../pages';\n\nimport './app.css';\n\nclass App extends Component {\n  render() {\n    return (\n      <main role='main' className='container'>\n        <ShopHeader />\n        <Switch>\n          <Route path='/' component={HomePage} exact />\n          <Route path='/cart' component={CartPage} />\n        </Switch>\n        <ShoppingCartTable />\n      </main>\n    );\n  }\n}\n\nexport default withBookstoreService()(App);\n","import App from './app';\n\nexport default App;\n","import ErrorBoundry from './error-boundry';\n\nexport default ErrorBoundry;\n","import React, { Component } from 'react';\nimport ErrorIndicator from '../error-indicator';\n\nexport default class ErrorBoundry extends Component {\n  state = {\n    hasError: false\n  };\n\n  componentDidCatch() {\n    this.setState({ hasError: true });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <ErrorIndicator />;\n    }\n\n    return this.props.children;\n  }\n}\n","export default class BookstoreService {\n  data = [\n    {\n      id: 1,\n      title: 'Production-Ready Microservices',\n      author: 'Susan J. Fowler',\n      price: 32,\n      coverImage:\n        'https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg'\n    },\n    {\n      id: 2,\n      title: 'Release It!',\n      author: 'Michael T. Nygard',\n      price: 45,\n      coverImage:\n        'https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg'\n    }\n  ];\n\n  getBooks() {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        if (Math.random() > 0.9) {\n          reject(new Error('Something bad happened'));\n        } else {\n          resolve(this.data);\n        }\n      }, 700);\n    });\n  }\n}\n","const updateBookList = (state, action) => {\n  if (state === undefined) {\n    return {\n      books: [],\n      loading: true,\n      error: null\n    };\n  }\n\n  switch (action.type) {\n    case 'FETCH_BOOKS_REQUEST':\n      return {\n        books: [],\n        loading: true,\n        error: null\n      };\n\n    case 'FETCH_BOOKS_SUCCESS':\n      return {\n        books: action.payload,\n        loading: false,\n        error: null\n      };\n\n    case 'FETCH_BOOKS_FAILURE':\n      return {\n        books: [],\n        loading: false,\n        error: action.payload\n      };\n\n    default:\n      return state.bookList;\n  }\n};\n\nexport default updateBookList;\n","const updateCartItems = (cartItems, item, idx) => {\n  if (item.count === 0) {\n    return [...cartItems.slice(0, idx), ...cartItems.slice(idx + 1)];\n  }\n\n  if (idx === -1) {\n    return [...cartItems, item];\n  }\n\n  return [...cartItems.slice(0, idx), item, ...cartItems.slice(idx + 1)];\n};\n\nconst updateCartItem = (book, item = {}, quantity) => {\n  const { id = book.id, count = 0, title = book.title, total = 0 } = item;\n\n  return {\n    id,\n    title,\n    count: count + quantity,\n    total: total + quantity * book.price\n  };\n};\n\nconst updateOrder = (state, bookId, quantity) => {\n  const {\n    bookList: { books },\n    shoppingCart: { cartItems }\n  } = state;\n\n  const book = books.find(({ id }) => id === bookId);\n  const itemIndex = cartItems.findIndex(({ id }) => id === bookId);\n  const item = cartItems[itemIndex];\n\n  const newItem = updateCartItem(book, item, quantity);\n\n  const total =\n    quantity === -1\n      ? state.shoppingCart.orderTotal - book.price\n      : state.shoppingCart.orderTotal + book.price;\n\n  return {\n    cartItems: updateCartItems(cartItems, newItem, itemIndex),\n    orderTotal: total\n  };\n};\n\nconst updateShoppingCart = (state, action) => {\n  if (state === undefined) {\n    return {\n      cartItems: [],\n      orderTotal: 0\n    };\n  }\n\n  switch (action.type) {\n    case 'BOOK_ADDED_TO_CART':\n      return updateOrder(state, action.payload, 1);\n\n    case 'BOOK_REMOVED_FROM_CART':\n      return updateOrder(state, action.payload, -1);\n\n    case 'ALL_BOOKS_REMOVED_FROM_CART':\n      const {\n        bookList: { books },\n        shoppingCart: { cartItems }\n      } = state;\n      console.log(cartItems);\n      const itemIndex = cartItems.findIndex(({ id }) => id === action.payload);\n      const item = cartItems.find(({ id }) => id === action.payload);\n      const book = books.find(({ id }) => id === action.payload);\n\n      return {\n        cartItems: [\n          ...cartItems.slice(0, itemIndex),\n          ...cartItems.slice(itemIndex + 1)\n        ],\n        orderTotal: state.shoppingCart.orderTotal - book.price * item.count\n      };\n\n    default:\n      return state.shoppingCart;\n  }\n};\n\nexport default updateShoppingCart;\n","import updateBookList from './book-list-reducer';\nimport updateShoppingCart from './shopping-cart-reducer';\n\nconst reducer = (state, action) => {\n  return {\n    bookList: updateBookList(state, action),\n    shoppingCart: updateShoppingCart(state, action)\n  };\n};\n\nexport default reducer;\n","import { createStore } from 'redux';\n\nimport reducer from './reducers';\n\nconst store = createStore(reducer);\n\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport App from './components/app';\nimport ErrorBoundry from './components/error-boundry';\nimport BookstoreService from './services/bookstore-service';\nimport { BookstoreServiceProvider } from './components/bookstore-service-context';\n\nimport store from './store';\n\nconst bookstoreService = new BookstoreService();\n\nReactDOM.render(\n  <Provider store={store}>\n    <ErrorBoundry>\n      <BookstoreServiceProvider value={bookstoreService}>\n        <Router>\n          <App />\n        </Router>\n      </BookstoreServiceProvider>\n    </ErrorBoundry>\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}